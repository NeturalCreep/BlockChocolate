<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <canvas width="600px" height="300px" style="border: 1px solid black;"></canvas>
    <button>↓</button>
    <button>↑</button>
    <button>←</button>
    <button>→</button>
    <button>STOPAnime</button>
    <button>Camera 1</button>
    <button>Cmaera 2</button>
    <button>↓</button>
    <button>↑</button>
    <button>←</button>
    <button>→</button>
    <button>AddNewSprit</button>
    <script src="BlockChocolate.js"></script>
    <script>
        var Tool = new THE_BEST_TOOL_CLASS('.');
        var classAnime = [new BCAnime([
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,0,73,106),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,116,73,100),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,222,73,100),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,328,73,100),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,434,73,95),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,530,73,100)],
             false,'down'),new BCAnime([
             new TITLEIMAGE(Tool.getImg('Demo.png'),74,0,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),74,108,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),74,217,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),74,320,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),74,428,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),74,533,73,108)],
             false,'up'),new BCAnime([
             new TITLEIMAGE(Tool.getImg('Demo.png'),152,0,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),152,108,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),152,217,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),152,320,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),152,428,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),152,533,73,108)],
             false,'left'),new BCAnime([
             new TITLEIMAGE(Tool.getImg('Demo.png'),228,0,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),228,108,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),228,217,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),228,320,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),228,428,73,108),
             new TITLEIMAGE(Tool.getImg('Demo.png'),228,533,73,108)],
             false,'right')];
             var Down_Run = new BCAnime([
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,0,73,106),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,116,73,100),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,222,73,100),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,328,73,100),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,434,73,95),
             new TITLEIMAGE(Tool.getImg('Demo.png'),0,530,73,100)],
             true,'down')
    var BC = new BlockChocolateEngine(document.getElementsByTagName('canvas')[0],20,10);
    BC.addEventListener(function(event){
        console.log(event);
    });
    var MainCamera = new Camera(BC);
    var Camera2 = new Camera(BC);
    var SpriteLayer = new Layer(false,BC);
    var Map = new Layer(true,BC);
    var InteractiveLayer = new Layer(false,BC);
    var Player = new Sprite(BC,[0,1]);
    var NPC = new Sprite(BC,[0,2]);
    var NPC2 = new Sprite(BC,[1,1]);
    Player.Animes =classAnime;
    NPC.Animes = classAnime;
    NPC2.Animes = classAnime;
    var TitleMap = new TitleMap();
    var TITLE2 = new TITLE('0x02',new TITLEIMAGE(Tool.getImg('ImgBg/flower14bq.png'),0,0,32,32));
    var TITLE = new TITLE('0x01',new TITLEIMAGE(Tool.getImg('ImgBg/auto11.png'),0,0,32,32));
    var MapData = new Array();
    for(var i = 0; i<BC.TitleHeight;i++){
        var maprow = new Array();
        for(var o = 0;o<BC.TitileWidth;o++){
            maprow.push('0x01');
        }
        MapData.push(maprow);
    }
    Map.SetMapData(MapData);
    var Coll = new Layer(true,BC);
    var CollMap = new Array();
    for(var i = 0; i<BC.TitleHeight;i++){
        var maprow = new Array();
        for(var o = 0;o<BC.TitileWidth;o++){
            if(i==0){
            maprow.push('0x02');
            }else{
            maprow.push('space');
            }
        }
        CollMap.push(maprow);
    }
    Coll.SetMapData(CollMap);
    SpriteLayer.addSprite(Player);
    SpriteLayer.addSprite(NPC);
    InteractiveLayer.addSprite(NPC2);
    MainCamera.setMainSprite(Player);
    Camera2.setMainSprite(NPC);
    TitleMap.AddNewTITLE(TITLE);
    TitleMap.AddNewTITLE(TITLE2);
    TitleMap.AddNewLayer(Map);
    TitleMap.AddNewLayer(SpriteLayer);
    TitleMap.InteractiveLayerAdd(InteractiveLayer);
    TitleMap.CollLayerAdd(Coll);
    BC.SetTitleMapMange(TitleMap);
    BC.setMainCamera(MainCamera);
    window.addEventListener('load',function(){
        NPC2.Move2Taget([0,0],Down_Run);
    BC.Start();
    document.getElementsByTagName('button')[0].onclick = function(){
        Player.Move2Taget([0,1],Player.Animes[0]);
    }
    document.getElementsByTagName('button')[1].onclick = function(){
        Player.Move2Taget([0,-1],Player.Animes[1]);
    }
    document.getElementsByTagName('button')[2].onclick = function(){
        Player.Move2Taget([-1,0],Player.Animes[2]);
    }
    document.getElementsByTagName('button')[3].onclick = function(){
        Player.Move2Taget([1,0],Player.Animes[3]);
    }
    document.getElementsByTagName('button')[4].onclick = function(){
        NPC2.StopAnimePlay();
    }
    document.getElementsByTagName('button')[5].onclick = function(){
    BC.setMainCamera(MainCamera);
    }
    document.getElementsByTagName('button')[6].onclick = function(){
    BC.setMainCamera(Camera2);
    }
    document.getElementsByTagName('button')[7].onclick = function(){
        NPC.Move2Taget([0,1],Player.Animes[0]);
    }
    document.getElementsByTagName('button')[8].onclick = function(){
        NPC.Move2Taget([0,-1],Player.Animes[1]);
    }
    document.getElementsByTagName('button')[9].onclick = function(){
        NPC.Move2Taget([-1,0],Player.Animes[2]);
    }
    document.getElementsByTagName('button')[10].onclick = function(){
        NPC.Move2Taget([1,0],Player.Animes[3]);
    }
    document.getElementsByTagName('button')[11].onclick = function(){
    Player.Interactive(function(flag,item){
        console.log(flag);
        if(flag=='Success'){
            alert('你找我干什么？');
        }
    });
    }
    })
    </script>
</body>
</html>